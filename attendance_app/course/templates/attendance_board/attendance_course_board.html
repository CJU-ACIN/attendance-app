{% load static %}
{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}

<!DOCTYPE html>
<html>
<head>
  <title>{{ course.name }} 출석 현황</title>
</head>
<body>
  {% include 'home/navbar.html' %}
  <br><br><br>
    <div class="container">
        <br><br>
      
        <h1><b>출석 -- {{ course.course_name }} -- 출석 현황</b></h1>

        <br>
        <br><br>

        <table class="table table-striped">
            <!--  -->
            <thead>
              <tr>
                <th scope="col">이름</th>
                <th scope="col">입실 시간</th>
                <th scope="col">퇴실 시간</th>
                <th scope="col">출석 인정</th>
              </tr>
            </thead>
            
            <!-- 학생 전체 정보 -->
            {% for student in students %}
                <tbody>
                    <tr>
                        <!-- 학생 이름 -->
                        <td> {{ student.name }} </td>

                        <!-- 입실 시간 -->
                        <td>
                            {% for class_attend in class_attends %}
                              {% if class_attend.student_id_id == student.id %}
                                {{ class_attend.start_at|time:"H:i:s" }}
                              {% endif %}
                            {% endfor %}
                        </td>

                        <!-- 퇴실 시간 -->
                        <td>
                            {% for class_attend in class_attends %}
                              {% if class_attend.student_id.pk == student.id %}
                                  {% if class_attend.end_at|time:"H:i:s" == '00:00:00'%}
                                  없음

                                {% else %}
                                  {{ class_attend.end_at|time:"H:i:s" }}
                                
                                  {% endif%}
                              
                                {% endif %}
                            {% endfor %}
                        </td>

                        <!-- 출석 인정 상태 -->
                        <td>
                            {% for class_attend in class_attends %}
                              {% if class_attend.student_id.pk == student.id %}
                                {{ class_attend.attend_state }}
                              {% endif %}
                            {% endfor %}
                        </td>
                    </tr>

                </tbody>

            {% endfor %}

          </table>

    


  </div>
</body>
</html>
